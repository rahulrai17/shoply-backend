# Default behaviour of Spring Security

Spring Security is a powerful framework for handling authentication, authorization, and protection against common security vulnerabilities in Spring-based applications. If you add Spring Security to your project without configuring it explicitly, it follows a set of default behaviors:

---

## ‚úÖ **Default Behavior of Spring Security**
1. **Auto-Configuration Enabled**
    - When you include `spring-boot-starter-security` in a Spring Boot project, Spring Security automatically sets up basic security settings.

---

### üîí **1. Default Authentication**
- A default login form is provided.
- A default user with the username `user` is created.
- The password is autogenerated and printed in the console at application startup:
   ```
   Using generated security password: <generated-password>
   ```
- The password is regenerated on every application restart unless explicitly set in `application.properties`:
   ```properties
   spring.security.user.name=admin  
   spring.security.user.password=admin123
   ```

---

### üö™ **2. Default Authorization**
- All endpoints are **secured by default**.
- Only authenticated users can access any endpoint.
- To allow public access to certain endpoints, you need to configure it explicitly.

Example of allowing public access:
```java
@Bean
public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {
    return http
            .authorizeHttpRequests(auth -> auth
                    .requestMatchers("/public/**").permitAll() // Public access
                    .anyRequest().authenticated() // All other requests require authentication
            )
            .formLogin(withDefaults()) // Default login form
            .build();
}
```

---

### üõ°Ô∏è **3. Default CSRF Protection**
- Cross-Site Request Forgery (CSRF) protection is enabled by default for **state-changing** HTTP methods (`POST`, `PUT`, `DELETE`, etc.).
- CSRF tokens are included in forms automatically.
- To disable CSRF (for APIs or stateless apps), you need to configure it:
```java
http.csrf(csrf -> csrf.disable());
```

---

### üîë **4. Default Session Management**
- A session is created upon successful authentication.
- The session remains valid until it expires or the user logs out.
- You can configure session behavior as needed:
```java
http.sessionManagement(session -> session
        .sessionCreationPolicy(SessionCreationPolicy.STATELESS) // For stateless JWT-based authentication
);
```

---

### üöÄ **5. Default Exception Handling**
- If an unauthorized user tries to access a protected endpoint:
    - Spring Security returns **401 Unauthorized** for failed authentication.
    - Returns **403 Forbidden** for failed authorization.

---

### üèÜ **6. Default Logout Handling**
- A `/logout` endpoint is provided by default.
- It invalidates the session and clears authentication.

Example of configuring logout:
```java
http.logout(logout -> logout
        .logoutUrl("/custom-logout")
        .logoutSuccessUrl("/login?logout=true")
);
```

---

### üåê **7. Default HTTP Security Headers**
Spring Security adds security headers automatically:
- `X-Content-Type-Options: nosniff`
- `X-Frame-Options: DENY`
- `X-XSS-Protection: 1; mode=block`
- `Strict-Transport-Security` (if HTTPS is enabled)

---

## ‚úÖ **Summary of Default Settings:**
| Feature | Default Behavior |
|---------|------------------|
| **Authentication** | Default user with autogenerated password |
| **Authorization** | All endpoints secured by default |
| **CSRF Protection** | Enabled |
| **Session Management** | New session created on login |
| **Exception Handling** | 401 Unauthorized, 403 Forbidden |
| **Logout Handling** | `/logout` endpoint provided |
| **HTTP Headers** | Secure headers added automatically |

---
